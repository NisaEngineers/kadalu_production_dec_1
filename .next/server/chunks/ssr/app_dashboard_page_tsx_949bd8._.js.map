{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/LOQ/Desktop/monaarch_fronend_october/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype UsageData = {\r\n  plan: string;\r\n  usage: Record<string, { used: number; limit: number }>;\r\n};\r\n\r\nexport default function DashboardPage() {\r\n  const [data, setData] = useState<UsageData | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function fetchUsage() {\r\n      try {\r\n        const res = await fetch(\"/api/get-usage\", { credentials: \"include\" });\r\n        const text = await res.text(); // read raw response\r\n\r\n        let json: any;\r\n        try {\r\n          json = JSON.parse(text);\r\n        } catch {\r\n          throw new Error(\"Response was not valid JSON:\\n\" + text.slice(0, 200));\r\n        }\r\n\r\n        if (res.ok) {\r\n          setData(json);\r\n        } else {\r\n          setError(json.error || \"Failed to fetch usage\");\r\n        }\r\n      } catch (err: any) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchUsage();\r\n  }, []);\r\n\r\n  if (loading) return <div className=\"p-4\">Loading usageâ€¦</div>;\r\n  if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\r\n  if (!data) return <div className=\"p-4\">No data available</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Dashboard</h1>\r\n      <p className=\"mb-6\">Current Plan: <strong>{data.plan}</strong></p>\r\n\r\n      <div className=\"space-y-4\">\r\n        {Object.entries(data.usage).map(([feature, { used, limit }]) => {\r\n          const percent = Math.min((used / limit) * 100, 100);\r\n          return (\r\n            <div key={feature} className=\"border p-4 rounded\">\r\n              <div className=\"flex justify-between mb-1\">\r\n                <span className=\"font-medium\">{feature}</span>\r\n                <span>{used}/{limit}</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded h-3\">\r\n                <div\r\n                  className={`h-3 rounded ${percent >= 100 ? \"bg-red-500\" : \"bg-green-500\"}`}\r\n                  style={{ width: `${percent}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AADA;;;AAQe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAoB;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,eAAe;YACb,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,kBAAkB;oBAAE,aAAa;gBAAU;gBACnE,MAAM,OAAO,MAAM,IAAI,IAAI,IAAI,oBAAoB;gBAEnD,IAAI;gBACJ,IAAI;oBACF,OAAO,KAAK,KAAK,CAAC;gBACpB,EAAE,OAAM;oBACN,MAAM,IAAI,MAAM,mCAAmC,KAAK,KAAK,CAAC,GAAG;gBACnE;gBAEA,IAAI,IAAI,EAAE,EAAE;oBACV,QAAQ;gBACV,OAAO;oBACL,SAAS,KAAK,KAAK,IAAI;gBACzB;YACF,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO;YACtB,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,IAAI,SAAS,qBAAO,8OAAC;QAAI,WAAU;kBAAM;;;;;;IACzC,IAAI,OAAO,qBAAO,8OAAC;QAAI,WAAU;kBAAoB;;;;;;IACrD,IAAI,CAAC,MAAM,qBAAO,8OAAC;QAAI,WAAU;kBAAM;;;;;;IAEvC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,8OAAC;gBAAE,WAAU;;oBAAO;kCAAc,8OAAC;kCAAQ,KAAK,IAAI;;;;;;;;;;;;0BAEpD,8OAAC;gBAAI,WAAU;0BACZ,OAAO,OAAO,CAAC,KAAK,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;oBACzD,MAAM,UAAU,KAAK,GAAG,CAAC,AAAC,OAAO,QAAS,KAAK;oBAC/C,qBACE,8OAAC;wBAAkB,WAAU;;0CAC3B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAAe;;;;;;kDAC/B,8OAAC;;4CAAM;4CAAK;4CAAE;;;;;;;;;;;;;0CAEhB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,WAAW,CAAC,YAAY,EAAE,WAAW,MAAM,eAAe,gBAAgB;oCAC1E,OAAO;wCAAE,OAAO,GAAG,QAAQ,CAAC,CAAC;oCAAC;;;;;;;;;;;;uBAR1B;;;;;gBAad;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}