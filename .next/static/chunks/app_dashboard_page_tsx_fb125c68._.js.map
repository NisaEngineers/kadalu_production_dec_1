{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LOQ/Desktop/monaarch_october/monaarch_frontend_/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ntype UsageData = {\r\n  plan: string;\r\n  usage: Record<string, { used: number; limit: number }>;\r\n};\r\n\r\nexport default function DashboardPage() {\r\n  const [data, setData] = useState<UsageData | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function fetchUsage() {\r\n      try {\r\n        const res = await fetch(\"/api/get-usage\", { credentials: \"include\" });\r\n        const text = await res.text(); // read raw response\r\n\r\n        let json: any;\r\n        try {\r\n          json = JSON.parse(text);\r\n        } catch {\r\n          throw new Error(\"Response was not valid JSON:\\n\" + text.slice(0, 200));\r\n        }\r\n\r\n        if (res.ok) {\r\n          setData(json);\r\n        } else {\r\n          setError(json.error || \"Failed to fetch usage\");\r\n        }\r\n      } catch (err: any) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchUsage();\r\n  }, []);\r\n\r\n  if (loading) return <div className=\"p-4\">Loading usageâ€¦</div>;\r\n  if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\r\n  if (!data) return <div className=\"p-4\">No data available</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Dashboard</h1>\r\n      <p className=\"mb-6\">Current Plan: <strong>{data.plan}</strong></p>\r\n\r\n      <div className=\"space-y-4\">\r\n        {Object.entries(data.usage).map(([feature, { used, limit }]) => {\r\n          const percent = Math.min((used / limit) * 100, 100);\r\n          return (\r\n            <div key={feature} className=\"border p-4 rounded\">\r\n              <div className=\"flex justify-between mb-1\">\r\n                <span className=\"font-medium\">{feature}</span>\r\n                <span>{used}/{limit}</span>\r\n              </div>\r\n              <div className=\"w-full bg-gray-200 rounded h-3\">\r\n                <div\r\n                  className={`h-3 rounded ${percent >= 100 ? \"bg-red-500\" : \"bg-green-500\"}`}\r\n                  style={{ width: `${percent}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAQe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAmB;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;mCAAC;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,MAAM,MAAM,MAAM,kBAAkB;wBAAE,aAAa;oBAAU;oBACnE,MAAM,OAAO,MAAM,IAAI,IAAI,IAAI,oBAAoB;oBAEnD,IAAI;oBACJ,IAAI;wBACF,OAAO,KAAK,KAAK,CAAC;oBACpB,EAAE,UAAM;wBACN,MAAM,IAAI,MAAM,mCAAmC,KAAK,KAAK,CAAC,GAAG;oBACnE;oBAEA,IAAI,IAAI,EAAE,EAAE;wBACV,QAAQ;oBACV,OAAO;wBACL,SAAS,KAAK,KAAK,IAAI;oBACzB;gBACF,EAAE,OAAO,KAAU;oBACjB,SAAS,IAAI,OAAO;gBACtB,SAAU;oBACR,WAAW;gBACb;YACF;YACA;QACF;kCAAG,EAAE;IAEL,IAAI,SAAS,qBAAO,6LAAC;QAAI,WAAU;kBAAM;;;;;;IACzC,IAAI,OAAO,qBAAO,6LAAC;QAAI,WAAU;kBAAoB;;;;;;IACrD,IAAI,CAAC,MAAM,qBAAO,6LAAC;QAAI,WAAU;kBAAM;;;;;;IAEvC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC;gBAAE,WAAU;;oBAAO;kCAAc,6LAAC;kCAAQ,KAAK,IAAI;;;;;;;;;;;;0BAEpD,6LAAC;gBAAI,WAAU;0BACZ,OAAO,OAAO,CAAC,KAAK,KAAK,EAAE,GAAG,CAAC;wBAAC,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;oBACzD,MAAM,UAAU,KAAK,GAAG,CAAC,AAAC,OAAO,QAAS,KAAK;oBAC/C,qBACE,6LAAC;wBAAkB,WAAU;;0CAC3B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAe;;;;;;kDAC/B,6LAAC;;4CAAM;4CAAK;4CAAE;;;;;;;;;;;;;0CAEhB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,WAAW,AAAC,eAA6D,OAA/C,WAAW,MAAM,eAAe;oCAC1D,OAAO;wCAAE,OAAO,AAAC,GAAU,OAAR,SAAQ;oCAAG;;;;;;;;;;;;uBAR1B;;;;;gBAad;;;;;;;;;;;;AAIR;GA9DwB;KAAA","debugId":null}}]
}